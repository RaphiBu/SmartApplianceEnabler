<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Appliances xmlns="http://github.com/camueller/SmartApplianceEnabler/v2.0">
    <Configuration param="NodeRED.Dashboard.Url" value="http://localhost:1880"/>
    <Appliance id="F-00000001-000000000002-00">
        <LevelSwitch>
            <!--HttpSwitch id="1">
                <HttpWrite url="http://tasmota/cm?cmnd=Power%20On">
                    <HttpWriteValue name="On" method="GET"/>
                </HttpWrite>
                <HttpWrite url="http://tasmota/cm?cmnd=Power%20Off">
                    <HttpWriteValue name="Off" method="GET"/>
                </HttpWrite>
                <HttpRead url="http://tasmota/cm?cmnd=status">
                    <HttpReadValue name="On"/>
                </HttpRead>
                <Notifications/>
            </HttpSwitch>
            <HttpSwitch id="2">
                <HttpWrite url="http://tasmota2/cm?cmnd=Power%20On">
                    <HttpWriteValue name="On" method="GET"/>
                </HttpWrite>
                <HttpWrite url="http://tasmota2/cm?cmnd=Power%20Off">
                    <HttpWriteValue name="Off" method="GET"/>
                </HttpWrite>
                <Notifications/>
            </HttpSwitch-->
            <ModbusSwitch id="1" idref="modbus" slaveAddress="1">
                <ModbusWrite address="2" type="Coil">
                    <ModbusWriteValue name="On" value="1"/>
                    <ModbusWriteValue name="Off" value="0"/>
                </ModbusWrite>
            </ModbusSwitch>
            <ModbusSwitch id="2" idref="modbus" slaveAddress="2">
                <ModbusWrite address="3" type="Coil">
                    <ModbusWriteValue name="On" value="1"/>
                    <ModbusWriteValue name="Off" value="0"/>
                </ModbusWrite>
            </ModbusSwitch>
            <!--
            <Switch id="1" gpio="1" reverseStates="true" />
            <Switch id="2" gpio="3" />
            -->
            <PowerLevel power="500">
                <SwitchStatus idref="1" on="true"/>
                <SwitchStatus idref="2" on="false"/>
            </PowerLevel>
            <PowerLevel power="1000">
                <SwitchStatus idref="1" on="false"/>
                <SwitchStatus idref="2" on="true"/>
            </PowerLevel>
            <PowerLevel power="1500">
                <SwitchStatus idref="1" on="true"/>
                <SwitchStatus idref="2" on="true"/>
            </PowerLevel>
        </LevelSwitch>
        <HttpElectricityMeter contentProtocol="JSON">
            <HttpRead url="http://tasmota/cm?cmnd=Status%208">
                <HttpReadValue name="Energy" method="GET" path="$.StatusSNS.ENERGY.Total"/>
            </HttpRead>
            <Notifications/>
        </HttpElectricityMeter>
        <Schedule enabled="true">
            <RuntimeRequest min="60" max="300"/>
            <DayTimeframe>
                <Start hour="8" minute="0" second="0"/>
                <End hour="16" minute="0" second="0"/>
            </DayTimeframe>
        </Schedule>
    </Appliance>
    <Connectivity>
        <MqttBroker host="localhost" port="1883"/>
        <ModbusTCP id="modbus" host="raspi2" port="502"/>
        <ModbusTCP id="wallbox" host="wallbox" port="502"/>
    </Connectivity>
</Appliances>
